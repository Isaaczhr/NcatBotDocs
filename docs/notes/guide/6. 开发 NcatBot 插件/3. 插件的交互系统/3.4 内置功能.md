---
title: 内置功能
createTime: 2025/03/27 10:00:05
permalink: /guide/builtinf/
---

## 插件配置项

### 注册插件配置项

NcatBot 插件系统内置了 `/cfg` 功能, 用于管理插件配置项.

插件配置项会在正常退出时自动保存, 下次启动时自动加载.

::: warning
配置项会占用内置可持久化数据的 `config` 键值.
:::

可以通过 `BasePlugin.register_config` 注册插件配置项.

函数原型:

```python
def register_config(
    self, key: str, default: Any, rptr: Callable[[str], Any] = None
):
```

- `key`: 插件配置项键名, 用于建立权限结构, 修改插件配置项所需的权限路径为 `cfg.<plugin_name>.<key>`.
- `default`: 插件配置项默认值.
- `rptr`: 插件配置项值转换函数, 接受一个 `str` 类型的参数, 必须定义为==同步函数==, 返回一个 `Any` 类型的值. 如果留空则不做转换默认为 `str` 类型.

### 更改插件配置项

触发格式: 向机器人私聊或者在存在机器人的群聊中发送 `/cfg <plugin_name>.<cfg_name> <value>`.

## 查看已安装插件

默认为==管理员功能==, 用于查看已经安装的插件.

触发格式: 向机器人私聊或者在存在机器人的群聊中发送 `/plg`.

## 设置管理员

默认为==ROOT功能==, 用于设置管理员.

触发格式: 向机器人私聊或者在存在机器人的群聊中发送 `/sm <user_id>`

如果 `user_id` 已经具有管理员权限, 则会取消其管理员权限.

BOT 的回复消息会反应管理员权限的状态

## 插件热重载

默认为==管理员功能==, 用于热重载插件。调试时非常有用。

触发格式: 向机器人私聊或者在存在机器人的群聊中发送 `/reload [-f] <plugin_name>`

- `[-f]`: 可选, 用于强制加载插件, 即使插件未加载也会尝试加载.
- `<plugin_name>`: 插件名称.

如果插件未加载且未使用 `-f` 参数, 则会提示使用 `-f` 参数强制加载.


## 管理权限

默认为==管理员功能==, 用于细致化修改权限.

触发格式: 向机器人私聊或者在存在机器人的群聊中发送 `/acs [-g] [ban]/[grant] <number> <path>`

- `[-g]`: 可选, 用于明确 `<number>` 是否为群聊.
- `[ban]/[grant]`: 指明是授予黑名单还是白名单, 授予黑名单时同时清除白名单.
- `<number>`: 群聊号或者用户 QQ 号.
- `<path>`: 权限路径, 一般格式为 `<plugin_name>.<func_name>`

`/acs` 无法操作某些特定的权限路径, 也无法操作具有 `/acs` 权限的用户. 
